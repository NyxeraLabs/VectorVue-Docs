---
layout: default
title: .federation-audit-local
---

# VectorVue Local Federation Audit (Non-Tracked)

Date: 2026-02-26
Branch: feat/federation-setup

## Local artifact placement (dockerized host)
- CA root: `/home/xoce/Workspace/VectorVue/deploy/certs/ca.crt`
- gateway cert/key: `/home/xoce/Workspace/VectorVue/deploy/certs/server.crt`, `/home/xoce/Workspace/VectorVue/deploy/certs/server.key`
- SpectraStrike client cert/key: `/home/xoce/Workspace/VectorVue/deploy/certs/client.crt`, `/home/xoce/Workspace/VectorVue/deploy/certs/client.key`
- SpectraStrike Ed25519 verify key: `/home/xoce/Workspace/VectorVue/deploy/certs/spectrastrike_ed25519.pub.pem`

## Config and trust updates
- PostgreSQL host port default moved to `55433`.
- Nginx now routes `/internal/` to `vectorvue_telemetry_gateway:8090`.
- Nginx attached to `telemetry_private` network.
- Redis attached to `telemetry_private` network (gateway nonce/rate-limit backend reachability).
- Telemetry gateway compose env now propagates:
  - `VV_TG_OPERATOR_TENANT_MAP`
  - `VV_TG_ENFORCE_SCHEMA_VERSION`
  - `VV_TG_ALLOWED_SCHEMA_VERSION`
- Allowed SpectraStrike service fingerprint updated:
  - `a8525203fbc1ecf03b1ccf2d21b9f6faeeb8d84ba291a823d24c087cb4ca48df`

## Certificate chain validation
- Regenerated with compliant X509 extensions:
  - CA: `basicConstraints=CA:TRUE`, `keyUsage=keyCertSign,cRLSign`
  - server: `extendedKeyUsage=serverAuth`, SAN includes `localhost` and `127.0.0.1`
  - client: `extendedKeyUsage=clientAuth`

## Live integration evidence
1) nmap federated telemetry accepted through gateway.
2) metasploit federated telemetry accepted through gateway.

Gateway tamper-evident log (`/var/lib/vectorvue/logs/tamper_audit.jsonl`) shows:
- Earlier rejects during hardening (`503` Redis unavailable, `403` operator mapping missing).
- Final accepted events:
  - `event_type=telemetry.accepted`, `operator_id=op-001`, `tenant_id=10000000-0000-0000-0000-000000000001`.

## Notes
- Endpoint path is operational via gateway; no client-facing portal API used for operator telemetry path.
